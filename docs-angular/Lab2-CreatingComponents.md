# Lab 2 - Creating Components

During lab you will create components with the Angular CLI to display highscores and add new scores using the Angular `FormBuilder`. You will learn how to navigate to these components using Angular `Routing`. The lab will also teach you how to use typesafe models with `Typescript`.

Goals for this lab:

- [Create a highscores component and display it](#inspect)
- [Display highscores in a list](#manage)
- [Create a form using FormBuilder](#working)

## Create a highscores component and display it

### 1. Create the component with the Angular CLI

The following will create a component where you are going to show highscores

```sh
ng generate component highscores/highscores-list

# You can also write the command short-handed:
# ng g c highscores/highscores-list

```

The script created a component folder `./angular-application/src/app/highscores/highscores-list` containing 4 files:

- **\*.component.ts**

  - Here you will put the logic for the component and connects to the .html and .sass file.

- **\*.component.spec.ts**

  - With the spec class you are able to unit test your component

- **\*.component.html**

  - This will show your content.

- **\*.component.sass**
  - The sass file gives you the oppurtunity to style the component. See 1. GettingStarted to learn more about Sass.

The Angular CLI command also added your component to the `AppModule`. You can find this file in `./angular-application/src/app/app.module.ts`

```ts
@NgModule({
  declarations: [
    AppComponent,
    // Added component
    HighscoresListComponent
    // #end
  ],
  imports: [BrowserModule, AppRoutingModule],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule {}
```

In the AppModule you declare what components are available for use in your application.

### 2. Display the component

Make the following changes to the `AppRoutingModule` which is automatically generated by the boiletplate Angular application `./angular-application/src/app/app-routing.module.ts`

```ts
const routes: Routes = [
  // Added route
  {
    path: "",
    component: HighscoresListComponent
  },
  // #end
];

@NgModule({
  imports: [RouterModule.forRoot(routes)],
  exports: [RouterModule]
})
export class AppRoutingModule {}
```

The `highscores-list` component is now the homepage of the Angular application

### 3. Run the application

```
npm start
```

You should now see the contents of the component: "highscores-list works!"

## Display highscores in a list

For this chapter you will need the component you created in the previous chapter: `./angular-application/src/app/highscores/highscores-list/*`

### 1. Create a model to hold highscores

Create a the following file `./angular-application/src/shared/models/highscore.ts`

// TODO: 
```ts
interface Highscore {

  nickname: string;

  game: string;

  points: number;
}
```

The `highscore.ts` is in a shared folder, so it can easily be used throughout the whole application when the application grows larger.

**interface vs class**

An interface is used because you are only interested in the properties (signature) of a highscore. Later you will see that these properties directly map onto the results from the API.

### 2. Create highscores

Create a list of highscores in the following file `./angular-application/src/app/highscores/highscores-list/highscores-list.component.ts`
 
```ts
@Component({
  selector: 'app-highscores-list',
  templateUrl: './highscores-list.component.html',
  styleUrls: ['./highscores-list.component.sass']
})
export class HighscoresListComponent implements OnInit {

  public highscores: Highscore[];

  constructor() { }

  ngOnInit() {
    this.highscores = [
      {
        nickname: "developerDays",
        game: "Awesome Angular Workshop"
        points: 231019
      },
      {
        namename: "Thijs Limmen",
        game: "Alarm Clock",
        points: 0600
      }
    ];
  }
}
```

### 3. Import Material Design in your AppModule

- Create a new Module to include all your Material Design Modules

```sh
ng g module AppMaterial --flat=true

# Generates a module which includes all Material Modules used in this application
# --flat creates the module file without a directory
```

The above command generates the following file `./angular-application/src/app/app-material-components.module.ts`

Replace the module's content with the following Material Modules which you are going to use throughout the application:

```ts
@NgModule({
  declarations: [],
  imports: [
    CommonModule,
    MatListModule,
    MatIconModule
  ],
  exports: [
    MatListModule,
    MatIconModule
  ]
})
export class AppMaterialModule { }
```

- Import the `AppMaterialModule` in your AppModule file `./angular-application/src/app/app.module.ts` 

```ts
@NgModule({
  declarations: [
    AppComponent,
    HighscoresListComponent
  ],
  imports: [
    BrowserModule, 
    AppRoutingModule,
    // Added module
    AppMaterialModule
    // #end
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule {}
```

The reason for creating a separate Module is because the amount of Material Modules can grow fast and this pollutes the `app.module.ts` file

### 4. Display highscores using Material components

Display the highscores in the following file `./angular-application/src/app/highscores/highscores-list/highscores-list.component.html`

``` html
<mat-list>
  <mat-list-item *ngFor="let highscore of highscores">
    <mat-icon matListIcon>dvr</mat-icon>
    <h3 matLine>{{ highscore.name }}</h3>
    <p matLine>
      <span> {{ highscore.score }} </span>
    </p>
  </mat-list-item>
</mat-list>
```

- \<mat-list-item> is an example of a Material component. 
- **matLine** is an Angular directive which adds new functionality to the component, like showing text below eachother.


## Add new scores

In this chapter you are going to create a new page, navigate to it and display a form using the Angular `FormBuilder`

### 1. Create a new add score page

Create a new component, just like you did with the highscores

```sh
ng generate component highscores/add-score --module=app

# --module=app selects the AppModule to auto import this generated component
```

The following component is generated:  `./angular-application/src/app/highscores/add-score/*`

### 2. Navigate to the add score page

- Make the following changes to the Routing Module `./angular-application/src/app/app-routing.module.ts`

```ts
const routes: Routes = [
  {
    path: "",
    component: HighscoresListComponent
  },
  // Added route
  {
    path: "add-score",
    component: AddScoreComponent
  }
  // #end
];

@NgModule({
  imports: [RouterModule.forRoot(routes)],
  exports: [RouterModule]
})
export class AppRoutingModule {}
```

- Add a (router)Link to the `add-score` page

Add the following to the highscores-list component `./angular-application/src/app/highscores/highscores-list/highscores-list.component.html`

```html
<mat-list>
  <!-- ... -->
</mat-list>

<!-- Added link -->
<a [routerLink]="['/add-score']">Add Score</a>
<!-- #end -->
```


### 3. Create a form using FormBuilder

Create a new form with Material components

```html
<form class="add-score-form">
  <mat-form-field class="input-nickname">
    <input matInput placeholder="Nickname" />
  </mat-form-field>

  <mat-form-field class="input-game">
    <mat-label>Games</mat-label>
    <mat-select required>
      <mat-option value="developerdays">Developer Days</mat-option>
      <mat-option value="alarmclock">Alarm Clock</mat-option>
      <mat-option value="linesofcode">Lines of Code</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field>
    <input type="number" matInput placeholder="Points" value="0" />
  </mat-form-field>

  <button class="form-button" mat-raised-button color="primary">
    Submit Score
  </button>
</form>
```

Let's add some style to the component for better spacing`./angular-application/src/app/highscores/add-score/add-score.component.scss`

//TODO SCSS
```sass
.add-score-form
    margin: 16px
    max-width: 600px

    .input-nickname
        width: 100%

    .input-game
        margin-right: 20px

    .form-button
        display: block
```